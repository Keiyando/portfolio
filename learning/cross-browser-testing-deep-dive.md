# ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ - è©³ç´°æŠ€è¡“è§£èª¬

## ğŸ¯ æ¦‚è¦

ãƒã‚±ãƒƒãƒˆ014ã§å®Ÿè£…ã—ãŸã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã¯ã€ãƒ¢ãƒ€ãƒ³ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªåŒ…æ‹¬çš„ãªãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•åŒ–ãƒ»ä½“ç³»åŒ–ã—ãŸé«˜åº¦ãªãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã§ã™ã€‚å˜ç´”ãªã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ¯”è¼ƒã§ã¯ãªãã€**å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶APIã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã‚’å‹•çš„ã«æ¤œè¨¼**ã™ã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚

### ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ€æƒ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ UI                   â”‚
â”‚              (test-runner.html)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆ â”‚ â”‚ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–  â”‚ â”‚æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ â”‚ â”‚
â”‚  â”‚             â”‚ â”‚ãƒ†ã‚¹ãƒˆ        â”‚ â”‚           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ â”‚ â”‚ãƒãƒªãƒ•ã‚£ãƒ«    â”‚ â”‚CSSä¿®æ­£    â”‚ â”‚
â”‚  â”‚ãƒ†ã‚¹ãƒˆ       â”‚ â”‚              â”‚ â”‚           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¨å½¹å‰²

### 1. çµ±åˆãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ (`test-runner.html`)

**å½¹å‰²**: å…¨ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®å¸ä»¤å¡”
**ç‰¹å¾´**: ãƒ¢ãƒ€ãƒ³ãªUI/UXã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—ã€çµæœå¯è¦–åŒ–

```html
<!-- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒã‚¤ãƒ³ãƒˆ -->
<div class="test-suites">
    <!-- å„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆãŒç‹¬ç«‹ã—ãŸã‚«ãƒ¼ãƒ‰UI -->
    <div class="test-suite" id="suite-automated">
        <button onclick="runAutomatedTests()">å®Ÿè¡Œ</button>
    </div>
</div>

<div class="progress-bar">
    <div class="progress-fill" id="overallProgress"></div>
</div>
```

#### JavaScriptå®Ÿè£…ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ

```javascript
// éåŒæœŸãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ‘ã‚¿ãƒ¼ãƒ³
async function runAllTests() {
    const tests = [
        runAutomatedTests,
        runResponsiveTests,
        runFunctionalTests,
        runEdgeCaseTests
    ];

    for (const test of tests) {
        await test();
        await sleep(500); // UIæ›´æ–°ã®ãŸã‚ã®é©åˆ‡ãªå¾…æ©Ÿæ™‚é–“
    }
}

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
try {
    result = await testCase.test();
} catch (error) {
    // å¤±æ•—ã—ã¦ã‚‚ç¶šè¡Œã—ã€è©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’åé›†
    this.testResults.push({
        status: 'fail',
        message: `ã‚¨ãƒ©ãƒ¼: ${error.message}`,
        details: { error: error.stack }
    });
}
```

**è¨­è¨ˆæ€æƒ³**: 
- **ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ãƒˆè¨­è¨ˆ**: 1ã¤ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¦ã‚‚å…¨ä½“ãŒåœæ­¢ã—ãªã„
- **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£é‡è¦–**: é€²æ—å¯è¦–åŒ–ã€è©³ç´°ãƒ­ã‚°ã€ç›´æ„Ÿçš„UI
- **æ‹¡å¼µæ€§**: æ–°ã—ã„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®¹æ˜“ã«è¿½åŠ å¯èƒ½

### 2. ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒãƒªãƒ•ã‚£ãƒ« (`polyfills.js`)

**å½¹å‰²**: å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚ãƒ¢ãƒ€ãƒ³æ©Ÿèƒ½ã‚’åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹

#### IntersectionObserver ãƒãƒªãƒ•ã‚£ãƒ«ã®å®Ÿè£…

```javascript
if (!('IntersectionObserver' in window)) {
    window.IntersectionObserver = class {
        constructor(callback, options = {}) {
            this.callback = callback;
            this.elements = new WeakMap(); // ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢
        }

        observe(element) {
            this.elements.set(element, true);
            this._checkIntersection(element);
        }

        _checkIntersection(element) {
            const rect = element.getBoundingClientRect();
            const isIntersecting = (
                rect.top < window.innerHeight &&
                rect.bottom > 0 &&
                rect.left < window.innerWidth &&
                rect.right > 0
            );

            // æœ¬ç‰©ã®APIã¨åŒã˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
            this.callback([{
                target: element,
                isIntersecting: isIntersecting,
                intersectionRatio: isIntersecting ? 1 : 0
            }]);
        }
    };
}
```

#### CSS.supports ãƒãƒªãƒ•ã‚£ãƒ«

```javascript
window.CSS.supports = function(property, value) {
    const element = document.createElement('div');
    try {
        element.style[property] = value;
        return element.style[property] === value;
    } catch (e) {
        return false; // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒèªè­˜ã•ã‚Œãªã„å ´åˆ
    }
};
```

**è¨­è¨ˆæ€æƒ³**:
- **ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ã‚¨ãƒ³ãƒãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ**: æ©Ÿèƒ½ãŒã‚ã‚‹å ´åˆã¯ä½¿ç”¨ã€ãªã„å ´åˆã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: WeakMapã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é˜²æ­¢
- **APIäº’æ›æ€§**: æœ¬ç‰©ã®APIã¨åŒã˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›

### 3. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ« (`responsive-tester.js`)

**å½¹å‰²**: å„è§£åƒåº¦ã§ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå•é¡Œã‚’è‡ªå‹•æ¤œå‡º

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå•é¡Œæ¤œå‡ºã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```javascript
detectLayoutIssues() {
    const issues = [];

    // æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç™ºç”Ÿãƒã‚§ãƒƒã‚¯
    if (document.body.scrollWidth > window.innerWidth) {
        issues.push(`æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç™ºç”Ÿ (bodyå¹…: ${document.body.scrollWidth}px)`);
    }

    // å°ã•ã™ãã‚‹ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰
    const smallTexts = Array.from(document.querySelectorAll('*')).filter(el => {
        const style = window.getComputedStyle(el);
        const fontSize = parseFloat(style.fontSize);
        return fontSize < 14 && fontSize > 0; // 14pxæœªæº€ã¯èª­ã¿ã«ãã„
    });

    // ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯ï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰
    if (window.innerWidth < 768) {
        const smallTargets = Array.from(document.querySelectorAll('a, button, input, [onclick]'))
            .filter(el => {
                const rect = el.getBoundingClientRect();
                return (rect.width < 44 || rect.height < 44) && rect.width > 0;
            });
        if (smallTargets.length > 0) {
            issues.push(`å°ã•ã™ãã‚‹ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ ${smallTargets.length}å€‹`);
        }
    }

    return issues;
}
```

#### å‹•çš„ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆãƒ†ã‚¹ãƒˆ

```javascript
testViewport(width, height, name) {
    // å®Ÿéš›ã®ãƒªã‚µã‚¤ã‚ºã¯ä¸å¯èƒ½ãªãŸã‚ã€ç¾åœ¨ã®ã‚µã‚¤ã‚ºã¨æ¯”è¼ƒåˆ†æ
    const currentWidth = window.innerWidth;
    const analysis = [];

    // ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆåˆ†æ
    const breakpoints = [
        { name: 'mobile', max: 640 },
        { name: 'tablet', max: 1024 },
        { name: 'desktop', max: Infinity }
    ];

    const targetCategory = breakpoints.find(bp => width <= bp.max);
    const currentCategory = breakpoints.find(bp => currentWidth <= bp.max);

    if (targetCategory?.name !== currentCategory?.name) {
        analysis.push({
            message: `ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´: ${currentCategory.name} â†’ ${targetCategory.name}`,
            type: 'warning'
        });
    }

    return analysis;
}
```

**è¨­è¨ˆæ€æƒ³**:
- **å®Ÿè·µçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒªã‚µã‚¤ã‚ºã¯ä¸å¯èƒ½ãªãŸã‚ã€è¨ˆç®—ãƒ™ãƒ¼ã‚¹ã§åˆ†æ
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£é‡è¦–**: WCAGæº–æ‹ ã®ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºã€ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º
- **æ®µéšçš„åˆ†æ**: ã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼ˆãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼‰ã®è©•ä¾¡

### 4. æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ (`functional-tests.js`)

**å½¹å‰²**: ã‚µã‚¤ãƒˆã®ä¸»è¦æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª

#### DOMæ§‹é€ ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

```javascript
testDOMStructure() {
    const requiredElements = [
        { selector: 'header', name: 'ãƒ˜ãƒƒãƒ€ãƒ¼' },
        { selector: 'nav', name: 'ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³' },
        { selector: 'main', name: 'ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„' },
        { selector: 'footer', name: 'ãƒ•ãƒƒã‚¿ãƒ¼' }
    ];

    const missingElements = requiredElements.filter(el => 
        !document.querySelector(el.selector)
    );
    
    return {
        status: missingElements.length === 0 ? 'pass' : 'fail',
        message: missingElements.length === 0 
            ? 'å¿…è¦ãªDOMè¦ç´ ãŒã™ã¹ã¦å­˜åœ¨'
            : `ä¸è¶³: ${missingElements.map(el => el.name).join(', ')}`,
        details: { missingElements }
    };
}
```

#### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å±æ€§ãƒ†ã‚¹ãƒˆ

```javascript
testAccessibilityAttributes() {
    const issues = [];
    
    // altå±æ€§ãƒã‚§ãƒƒã‚¯
    const imagesWithoutAlt = document.querySelectorAll('img:not([alt])');
    if (imagesWithoutAlt.length > 0) {
        issues.push(`altå±æ€§ãªã—ç”»åƒ: ${imagesWithoutAlt.length}å€‹`);
    }

    // ãƒ˜ãƒƒãƒ€ãƒ¼æ§‹é€ ãƒã‚§ãƒƒã‚¯ï¼ˆSEOãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰
    const h1Count = document.querySelectorAll('h1').length;
    if (h1Count !== 1) {
        issues.push(`H1ã‚¿ã‚°æ•°ç•°å¸¸: ${h1Count}å€‹ï¼ˆæ¨å¥¨: 1å€‹ï¼‰`);
    }

    // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½è¦ç´ ã®labelç¢ºèª
    const inputsWithoutLabel = document.querySelectorAll(
        'input:not([id]):not([aria-label]):not([aria-labelledby])'
    );

    return {
        status: issues.length === 0 ? 'pass' : 'warning',
        message: issues.length === 0 ? 'ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£é©åˆ‡' : `å•é¡Œ: ${issues.length}ä»¶`,
        details: { issues }
    };
}
```

**è¨­è¨ˆæ€æƒ³**:
- **ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯é‡è¦–**: HTML5ã®æ§‹é€ è¦ç´ ã®é©åˆ‡ãªä½¿ç”¨ã‚’æ¤œè¨¼
- **WCAGæº–æ‹ **: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«åŸºã¥ãæ¤œè¨¼
- **å®Ÿç”¨æ€§é‡è¦–**: å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«å½±éŸ¿ã™ã‚‹é …ç›®ã‚’å„ªå…ˆ

### 5. ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ (`edge-case-tests.js`)

**å½¹å‰²**: ç‰¹æ®Šç’°å¢ƒãƒ»åˆ¶é™æ¡ä»¶ã§ã®å‹•ä½œæ¤œè¨¼

#### JavaScriptç„¡åŠ¹æ™‚ãƒ†ã‚¹ãƒˆ

```javascript
testWithoutJavaScript() {
    // JavaScriptç„¡åŠ¹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã€
    // HTML/CSSã®ã¿ã§ã®æ©Ÿèƒ½ã‚’ç¢ºèª
    const staticElements = {
        navigation: document.querySelector('nav'),
        forms: document.querySelectorAll('form'),
        links: document.querySelectorAll('a[href]'),
        content: document.querySelector('main')
    };

    // ã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯ã®å‹•ä½œç¢ºèªï¼ˆJavaScriptä¸è¦ï¼‰
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    const validAnchors = Array.from(anchorLinks).filter(link => {
        const targetId = link.getAttribute('href').substring(1);
        return document.getElementById(targetId) !== null;
    }).length;

    return {
        status: validAnchors > 0 ? 'pass' : 'warning',
        message: 'JavaScriptç„¡åŠ¹ã§ã‚‚åŸºæœ¬æ©Ÿèƒ½ã¯åˆ©ç”¨å¯èƒ½',
        details: {
            staticElements: Object.keys(staticElements).filter(key => 
                staticElements[key] && (staticElements[key].length > 0 || staticElements[key])
            ),
            anchorLinks: anchorLinks.length,
            validAnchors: validAnchors
        }
    };
}
```

#### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çŠ¶æ…‹ãƒ†ã‚¹ãƒˆ

```javascript
testSlowNetwork() {
    // Connection APIã‚’æ´»ç”¨
    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
    
    const networkTests = {
        hasConnectionAPI: connection !== undefined,
        effectiveType: connection ? connection.effectiveType : 'unknown',
        downlink: connection ? connection.downlink : null, // Mbps
        rtt: connection ? connection.rtt : null // ms
    };

    // é…å»¶èª­ã¿è¾¼ã¿è¦ç´ ã®ç¢ºèªï¼ˆä½é€Ÿå›ç·šå¯¾ç­–ï¼‰
    const lazyElements = document.querySelectorAll('[loading="lazy"], [data-src]');
    const criticalResources = document.querySelectorAll('link[rel="preload"], link[rel="prefetch"]');

    return {
        status: 'pass',
        message: 'ä½é€Ÿãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¯¾å¿œã‚’ç¢ºèª',
        details: {
            ...networkTests,
            lazyElements: lazyElements.length,
            criticalResources: criticalResources.length,
            hasOptimization: lazyElements.length > 0 || criticalResources.length > 0
        }
    };
}
```

#### ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ãƒ»é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆå¯¾å¿œãƒ†ã‚¹ãƒˆ

```javascript
testDarkMode() {
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    // CSSå†…ã®ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚¯ã‚¨ãƒªæ¤œå‡º
    const hasDarkModeStyles = Array.from(document.styleSheets).some(sheet => {
        try {
            return Array.from(sheet.cssRules).some(rule => 
                rule.type === CSSRule.MEDIA_RULE && 
                rule.conditionText.includes('prefers-color-scheme: dark')
            );
        } catch (e) {
            return false; // CORSç­‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆ
        }
    });

    return {
        status: hasDarkModeStyles ? 'pass' : 'warning',
        message: hasDarkModeStyles ? 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œæ¸ˆã¿' : 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰æœªå¯¾å¿œ',
        details: {
            prefersDark: prefersDark,
            hasDarkModeStyles: hasDarkModeStyles,
            supportsColorScheme: CSS.supports('color-scheme', 'dark')
        }
    };
}
```

**è¨­è¨ˆæ€æƒ³**:
- **ç¾å®Ÿçš„åˆ¶ç´„ã¸ã®å¯¾å¿œ**: å®Œå…¨ãªã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãªãã€æ¤œå‡ºå¯èƒ½ãªç¯„å›²ã§ã®æ¤œè¨¼
- **ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ã‚¨ãƒ³ãƒãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ**: åŸºæœ¬æ©Ÿèƒ½â†’æ‹¡å¼µæ©Ÿèƒ½ã®é †ã§æ¤œè¨¼
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã®å°Šé‡**: `prefers-*` ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒªã®æ´»ç”¨

### 6. CSSäº’æ›æ€§ä¿®æ­£ (`compatibility-fixes.css`)

**å½¹å‰²**: ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ã®CSSå•é¡Œã‚’è§£æ±º

#### Flexboxäº’æ›æ€§å¯¾å¿œ

```css
/* å…¨ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œã®Flexbox */
.flex-container {
    display: -webkit-box;      /* iOS 6-, Safari 3.1-6 */
    display: -webkit-flex;     /* Safari 6.1+, Chrome 21-28 */
    display: -moz-box;         /* Firefox 2-21 */
    display: -ms-flexbox;      /* IE 10 */
    display: flex;             /* æ¨™æº– */
}

.flex-center {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -moz-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -moz-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
}
```

#### CSS Grid ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥

```css
/* CSS Grid ã‚µãƒãƒ¼ãƒˆç¢ºèª */
@supports (display: grid) {
    .grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--grid-gap, 24px);
    }
}

/* Gridæœªå¯¾å¿œæ™‚ã®Flexboxãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
@supports not (display: grid) {
    .grid-container {
        display: flex;
        flex-wrap: wrap;
        margin: -12px; /* gapä»£æ›¿ */
    }
    
    .grid-container > * {
        flex: 1 1 300px;
        margin: 12px;
        min-width: 0; /* Flexbox shrinkä¿®æ­£ */
    }
}
```

#### CSS Custom Properties ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

```css
/* CSSå¤‰æ•° + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ */
.primary-button {
    background-color: #1d4ed8; /* ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
    background-color: var(--color-primary, #1d4ed8);
    color: #ffffff; /* ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
    color: var(--color-text-inverse, #ffffff);
}
```

**è¨­è¨ˆæ€æƒ³**:
- **æ®µéšçš„æ©Ÿèƒ½å‘ä¸Š**: `@supports` ã‚’ä½¿ã£ãŸæ©Ÿèƒ½æ¤œå‡º
- **é©åˆ‡ãªãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: æ©Ÿèƒ½ãŒãªã„å ´åˆã‚‚ç ´ç¶»ã—ãªã„è¨­è¨ˆ
- **ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹**: å¿…è¦æœ€å°é™ã§ã®å¯¾å¿œ

## ğŸ”„ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã®è©³ç´°

### 1. åˆæœŸåŒ–ãƒ•ã‚§ãƒ¼ã‚º

```javascript
// ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã®è©³ç´°æƒ…å ±åé›†
function displayBrowserInfo() {
    const info = {
        browser: getBrowserName() + ' ' + getBrowserVersion(),
        platform: navigator.platform,
        viewport: `${window.innerWidth} Ã— ${window.innerHeight}`,
        devicePixelRatio: window.devicePixelRatio || 1,
        language: navigator.language,
        cookieEnabled: navigator.cookieEnabled,
        onLine: navigator.onLine
    };
    // UIæ›´æ–°...
}
```

### 2. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ•ã‚§ãƒ¼ã‚º

```javascript
async function runAllTests() {
    // 1. é€²æ—åˆæœŸåŒ–
    testProgress.completed = 0;
    updateOverallProgress();

    // 2. é †æ¬¡å®Ÿè¡Œï¼ˆä¸¦åˆ—ã§ã¯ãªãé †æ¬¡ã§å®‰å®šæ€§ç¢ºä¿ï¼‰
    const tests = [runAutomatedTests, runResponsiveTests, runFunctionalTests, runEdgeCaseTests];
    
    for (const test of tests) {
        await test();
        await sleep(500); // UIæ›´æ–°æ™‚é–“ã‚’ç¢ºä¿
    }

    // 3. çµæœé›†ç´„ã¨è¡¨ç¤º
    showResults();
}
```

### 3. çµæœé›†ç´„ãƒ•ã‚§ãƒ¼ã‚º

```javascript
function generateTestReport() {
    const summary = {
        totalTests: this.testResults.length,
        passed: this.testResults.filter(r => r.status === 'pass').length,
        warnings: this.testResults.filter(r => r.status === 'warning').length,
        failed: this.testResults.filter(r => r.status === 'fail').length,
        totalDuration: this.testResults.reduce((sum, r) => sum + r.duration, 0)
    };

    // ã‚«ãƒ†ã‚´ãƒªåˆ¥åˆ†æ
    const categorySummary = {};
    this.testResults.forEach(result => {
        if (!categorySummary[result.category]) {
            categorySummary[result.category] = { total: 0, passed: 0 };
        }
        categorySummary[result.category].total++;
        if (result.status === 'pass') {
            categorySummary[result.category].passed++;
        }
    });

    return { summary, categorySummary };
}
```

## ğŸ¨ UI/UXè¨­è¨ˆã®å·¥å¤«

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

```css
.test-suites {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

@media (max-width: 768px) {
    .test-suites {
        grid-template-columns: 1fr; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯1åˆ— */
    }
}
```

### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

```css
.run-button {
    transition: all 0.2s;
}

.run-button:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
}

.status-running { 
    animation: pulse 1.5s infinite; 
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
```

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. éåŒæœŸå‡¦ç†ã¨ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°

```javascript
// ãƒ‡ãƒã‚¦ãƒ³ã‚¹å®Ÿè£…ã§ãƒªã‚µã‚¤ã‚ºã‚¤ãƒ™ãƒ³ãƒˆæœ€é©åŒ–
const handleResize = debounce(() => {
    displayBrowserInfo();
}, 250);

window.addEventListener('resize', handleResize);

function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}
```

### 2. ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯å¯¾ç­–

```javascript
// WeakMapã§ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢
const elements = new WeakMap();

// ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®é©åˆ‡ãªå‰Šé™¤
window.addEventListener('resize', this.resizeHandler);
// ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ™‚
window.removeEventListener('resize', this.resizeHandler);
```

### 3. DOMæ“ä½œã®æœ€é©åŒ–

```javascript
// DocumentFragmentã‚’ä½¿ç”¨ã—ãŸåŠ¹ç‡çš„ãªDOMæ“ä½œ
const fragment = document.createDocumentFragment();
results.forEach(result => {
    const element = document.createElement('div');
    element.textContent = result.message;
    fragment.appendChild(element);
});
container.appendChild(fragment); // 1å›ã®DOMæ“ä½œ
```

## ğŸ“Š ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥

### 1. ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ãƒ‡ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

```javascript
try {
    const result = await test.test();
    // æˆåŠŸå‡¦ç†
} catch (error) {
    // ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’è¨˜éŒ²ã™ã‚‹ãŒã€ãƒ†ã‚¹ãƒˆç¶šè¡Œ
    this.testResults.push({
        status: 'fail',
        message: `ã‚¨ãƒ©ãƒ¼: ${error.message}`,
        details: { 
            error: error.stack,
            timestamp: new Date().toISOString()
        }
    });
}
```

### 2. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥

```javascript
// æ©Ÿèƒ½æ¤œå‡º â†’ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
if (typeof FunctionalTests !== 'undefined') {
    const results = await FunctionalTests.runAllTests();
} else {
    // åŸºæœ¬çš„ãªä»£æ›¿ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    logMessage('FunctionalTests unavailable, running basic checks', 'warning');
    results = await runBasicChecks();
}
```

## ğŸ” å®Ÿéš›ã®ä½¿ç”¨ä¾‹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. æ–°æ©Ÿèƒ½é–‹ç™ºæ™‚ã®ä½¿ç”¨

```bash
# 1. æ©Ÿèƒ½å®Ÿè£…
# 2. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
python -m http.server 8000

# 3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
open http://localhost:8000/tests/cross-browser/test-runner.html
# ã€Œå…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€ã‚¯ãƒªãƒƒã‚¯

# 4. å•é¡ŒãŒã‚ã‚Œã°ä¿®æ­£ â†’ å†ãƒ†ã‚¹ãƒˆ
```

### 2. ãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¾Œã®æ¤œè¨¼

```javascript
// ç‰¹å®šãƒ–ãƒ©ã‚¦ã‚¶ã§ã®å•é¡Œæ¤œè¨¼
if (getBrowserName() === 'Chrome' && getBrowserVersion().startsWith('120')) {
    // Chrome 120ç‰¹æœ‰ã®å•é¡Œã‚’ãƒã‚§ãƒƒã‚¯
    runSpecificChecks();
}
```

### 3. CI/CDçµ±åˆã®æº–å‚™

```javascript
// JSONçµæœã‚’CIç”¨ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
function exportForCI() {
    const results = {
        success: summary.failed === 0,
        totalTests: summary.totalTests,
        passRate: summary.passRate,
        criticalIssues: testResults.filter(r => r.status === 'fail')
    };
    return JSON.stringify(results);
}
```

## ğŸ¯ ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§

### 1. æ–°ã—ã„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ 

```javascript
// functional-tests.js ã¸ã®è¿½åŠ ä¾‹
{
    name: 'PWAæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
    test: () => this.testPWAFeatures(),
    category: 'PWA'
}

testPWAFeatures() {
    const hasServiceWorker = 'serviceWorker' in navigator;
    const hasManifest = document.querySelector('link[rel="manifest"]') !== null;
    const hasAppIcons = document.querySelector('link[rel="apple-touch-icon"]') !== null;
    
    return {
        status: hasServiceWorker && hasManifest ? 'pass' : 'warning',
        message: 'PWAæ©Ÿèƒ½ç¢ºèª',
        details: { hasServiceWorker, hasManifest, hasAppIcons }
    };
}
```

### 2. è‡ªå‹•åŒ–ãƒ¬ãƒ™ãƒ«ã®å‘ä¸Š

```javascript
// ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£ + æ¯”è¼ƒ
async function captureScreenshot() {
    if ('getDisplayMedia' in navigator.mediaDevices) {
        const stream = await navigator.mediaDevices.getDisplayMedia();
        // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå‡¦ç†
    }
}
```

## ğŸ’¡ å­¦ã‚“ã æ•™è¨“ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ãƒ†ã‚¹ãƒˆã®ä¿¡é ¼æ€§
- **æ±ºå®šè«–çš„ãƒ†ã‚¹ãƒˆ**: åŒã˜æ¡ä»¶ã§ã¯å¿…ãšåŒã˜çµæœ
- **ç’°å¢ƒä¾å­˜ã®æœ€å°åŒ–**: ãƒ–ãƒ©ã‚¦ã‚¶å·®ç•°ã‚’è€ƒæ…®ã—ãŸå®Ÿè£…
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶ç­‰ã¸ã®å¯¾å¿œ

### 2. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²**: æ©Ÿèƒ½åˆ¥ã®ç‹¬ç«‹ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
- **è¨­å®šã®å¤–éƒ¨åŒ–**: ãƒ†ã‚¹ãƒˆè¨­å®šã®å¤‰æ›´ãŒå®¹æ˜“
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–**: ä½¿ã„æ–¹ã‹ã‚‰å®Ÿè£…è©³ç´°ã¾ã§

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **éåŒæœŸå‡¦ç†**: UIãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã®å›é¿
- **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**: ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®é˜²æ­¢
- **åŠ¹ç‡çš„ãªDOMæ“ä½œ**: æœ€å°é™ã®å†æç”»

---

ã“ã®ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã¯ã€å˜ãªã‚‹ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã‚’è¶…ãˆã¦ã€**Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªä¿è¨¼ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ç¶™ç¶šçš„ãªæ”¹å–„ã«ã‚ˆã‚Šã€ã‚ˆã‚Šé«˜åº¦ã§å®Ÿç”¨çš„ãªãƒ†ã‚¹ãƒˆç’°å¢ƒã¸ã¨ç™ºå±•ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚